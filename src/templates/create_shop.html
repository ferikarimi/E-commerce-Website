<!-- create-shop.html -->
<form id="shop-form">
    <input type="text" name="name" placeholder="نام فروشگاه" required />
    <input type="text" name="address" placeholder="آدرس فروشگاه" required />
    <input type="text" name="phone" placeholder="شماره تماس فروشگاه" required />
    <textarea name="description" placeholder="توضیحات فروشگاه"></textarea>
    <button type="submit">ثبت فروشگاه</button>
  </form>
  
  <script>
    const form = document.getElementById("shop-form");
  
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(form);
  
      const data = {
        name: formData.get("name"),
        address: formData.get("address"),
        phone: formData.get("phone"),
        description: formData.get("description"),
      };
  
      try {
        const res = await fetch("http://localhost:8000/vendors/create_shop/", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer " + localStorage.getItem("access_token"),  // اگر توکن JWT استفاده می‌کنی
          },
          body: JSON.stringify(data),
        });
  
        const responseData = await res.json();
  
        if (res.ok) {
          alert("فروشگاه با موفقیت ثبت شد!");
          window.location.href = "/dashboard.html";
        } else {
          alert("خطا: " + JSON.stringify(responseData));
        }
      } catch (error) {
        console.error("Error:", error);
        alert("مشکلی در ثبت فروشگاه رخ داد.");
      }
    });
  </script>
  